{# Copyright 2020 Karlsruhe Institute of Technology
 #
 # Licensed under the Apache License, Version 2.0 (the "License");
 # you may not use this file except in compliance with the License.
 # You may obtain a copy of the License at
 #
 #     http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License. #}

{% extends "base.html" %}

{% block head %}
  <link rel="preload" href="{{ static_url('images/kadi_bg.png') }}" as="image" type="image/png">
{% endblock %}

{% block content %}
  <language-prompt class="mb-4" preferred-locale="{{ preferred_locale }}"></language-prompt>

  {% include "main/snippets/header.html" %}

  <div class="card mt-4">
    <div class="card-body">
      <div class="row align-items-center">
        <div class="col-lg-7 mb-4 mb-lg-0">
          <h5>
            <strong>{% trans %}Welcome to Kadi4Mat.{% endtrans %}</strong>
          </h5>
          {% trans strong_open="<strong>" | safe, strong_close="</strong>" | safe, trimmed %}
            Kadi4Mat is the {{ strong_open }}Karlsruhe Data Infrastructure for Materials Science{{ strong_close }}, an
            open source software for managing research data.
          {% endtrans %}
        </div>
        <div class="col-lg-5">
          <a href="{{ url_for('main.about') }}" class="btn btn-sm btn-block btn-light">
            {% trans %}About{% endtrans %}
          </a>
          <a href="{{ url_for('main.help') }}" class="btn btn-sm btn-block btn-light">
            <i class="fa-solid fa-circle-question"></i> {% trans %}Help{% endtrans %}
          </a>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <div class="row">
        <div class="col-lg-5 offset-lg-7">
          <a href="{{ url_for('accounts.login') }}" class="btn btn-block btn-primary">
            <i class="fa-solid fa-arrow-right-to-bracket"></i> {% trans %}Login{% endtrans %}
          </a>
        </div>
      </div>
    </div>
  </div>

  {% if get_sys_config("INDEX_IMAGE") or get_sys_config("INDEX_TEXT") %}
    <div class="card bg-light mt-4">
      {% if get_sys_config("INDEX_IMAGE") and get_sys_config("INDEX_TEXT") %}
        <div class="card-body p-2">
          <div class="row d-flex align-items-center">
            <div class="col-lg-auto d-flex justify-content-center d-lg-block max-w-lg-50">
              <img class="img-thumbnail" src="{{ url_for('api.preview_index_image') }}">
            </div>
            <div class="col-lg pt-4 pt-lg-3">
              <markdown-preview input="{{ get_sys_config('INDEX_TEXT') }}"></markdown-preview>
            </div>
          </div>
        </div>
      {% elif get_sys_config("INDEX_IMAGE") %}
        <div class="card-body p-2">
          <div class="text-center">
            <img class="img-thumbnail" src="{{ url_for('api.preview_index_image') }}">
          </div>
        </div>
      {% elif get_sys_config("INDEX_TEXT") %}
        <div class="card-body pb-1">
          <markdown-preview input="{{ get_sys_config('INDEX_TEXT') }}"></markdown-preview>
        </div>
      {% endif %}
    </div>
  {% endif %}

  {{ template_hook("kadi_get_index_templates") }}
{% endblock %}
