<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:meta="http://xml.zope.org/namespaces/meta"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      id="register"
      meta:interpolation="true"
      metal:use-macro="context/@@shell/macros/shell"
      tal:define="
        webhelpers nocall:context/@@webhelpers;
        client nocall:request/client;
      "
      i18n:domain="euphorie"
>

  <body>
    <metal:slot fill-slot="content"
                tal:define="
                  is_guest_account webhelpers/is_guest_account;
                  base_url webhelpers/base_url;
                "
    >
      <div id="content-pane">
        <tal:block replace="tile:statusmessages" />
        <article tal:condition="python:is_guest_account and request.get('report_blurb')">
          <h1 i18n:translate="header_reporting">Reporting</h1>
          <p i18n:translate="report_guest_register_intro">We are sorry, this is a trial version and the download feature cannot be used. Register in just one step and gain access to the following benefits:</p>
          <ul>
            <li i18n:translate="label_register_benefit_1">It's free.</li>
            <li i18n:translate="label_register_benefit_2">You can save your work online.</li>
            <li i18n:translate="label_register_benefit_3">You can download a full report and an action plan.</li>
          </ul>
          <hr class="pat-separator blank" />
          <div class="pat-gallery">
            <div class="row"
                 tal:define="
                   rtfname string:example-rtf-ribbon;
                   xlsname string:example-xlsx-ribbon;
                   rtf_img_full python:'%s/%s.png' %(media_url, view.get_image_version(rtfname));
                   rtf_img_thumb python:'%s/%s.png' %(media_url, view.get_image_version(rtfname + '-thumb'));
                   xls_img_full python:'%s/%s.png' %(media_url, view.get_image_version(xlsname));
                   xls_img_thumb python:'%s/%s.png' %(media_url, view.get_image_version(xlsname + '-thumb'));
                 "
            >
              <a class="four columns push-two"
                 href="${rtf_img_full}"
              >
                <figure>
                  <img alt="Example of a full report in Word format (.docx)"
                       src="${rtf_img_thumb}"
                       title="Example of a full report in Word format (.docx)"
                       i18n:attributes="title header_example_report_rft; alt header_example_report_rft"
                  />
                  <figcaption i18n:translate="header_example_report_rft">
                      Example of a full report in Word format (.docx)
                  </figcaption>
                </figure>
              </a>
              <a class="four columns pull-two"
                 href="${xls_img_full}"
              >
                <figure>
                  <img alt="Example of an action plan in Office Open XML Workbook format (.xlsx)"
                       src="${xls_img_thumb}"
                       title="Example of an action plan in Office Open XML Workbook format (.xlsx)"
                       i18n:attributes="alt header_example_report_xlsx; title header_example_report_xlsx;"
                  />
                  <figcaption i18n:translate="header_example_report_xlsx">
                      Example of an action plan in Office Open XML Workbook format (.xlsx)
                  </figcaption>
                </figure>
              </a>
            </div>
            <div class="row"
                 tal:define="
                   risksname string:example-risks-report;
                   measuresname string:example-measures-report;
                   risks_img_full python:'%s/%s.png' %(media_url, view.get_image_version(risksname));
                   risks_img_thumb python:'%s/%s.png' %(media_url, view.get_image_version(risksname + '-thumb'));
                   measures_img_full python:'%s/%s.png' %(media_url, view.get_image_version(measuresname));
                   measures_img_thumb python:'%s/%s.png' %(media_url, view.get_image_version(measuresname + '-thumb'));
                 "
            >
              <a class="four columns push-two"
                 href="${risks_img_full}"
              >
                <figure>
                  <img alt="Example of a risk overview report in PDF format"
                       src="${risks_img_thumb}"
                       title="Example of a risk overview report in PDF format"
                       i18n:attributes="alt header_example_report_risks; title header_example_report_risks"
                  />
                  <figcaption i18n:translate="header_example_report_risks">
                      Example of a risk overview report in PDF format
                  </figcaption>
                </figure>
              </a>
              <a class="four columns pull-two"
                 href="${measures_img_full}"
              >
                <figure>
                  <img alt="Example of a measures overview report in PDF format"
                       src="${measures_img_thumb}"
                       title="Example of a measures overview report in PDF format"
                       i18n:attributes="alt header_example_report_measures; title header_example_report_measures"
                  />
                  <figcaption i18n:translate="header_example_report_measures">
                      Example of a measures overview report in PDF format
                  </figcaption>
                </figure>
              </a>
            </div>
          </div>
          <h2 i18n:translate="header_register">Register</h2>
        </article>

        <article tal:condition="python: not request.get('report_blurb')">
          <h1 i18n:translate="header_register">Register</h1>
        </article>

        <p class="message error"
           tal:condition="view/error|nothing"
        >${view/error}</p>

        <form class="pat-validation"
              accept-charset="UTF-8"
              action="${request/URL}"
              enctype="multipart/form-data"
              method="post"
              data-pat-validation="message-email: ${view/email_message}"
              tal:define="
                errors view/errors;
              "
        >
          <input name="came_from"
                 type="hidden"
                 value="${request/came_from}"
                 tal:condition="request/came_from|nothing"
          />
          <fieldset class="vertical">
            <tal:guest_account define="
                                 account webhelpers/get_current_account;
                               "
                               condition="is_guest_account|nothing"
            >
              <input name="guest_account_id"
                     type="hidden"
                     value="${account/id|nothing}"
              />
            </tal:guest_account>
            <label class="${python:'error' if 'email' in errors else None}"><tal:span i18n:translate="label_email">Email address</tal:span>
              <input class="email"
                     autofocus="autofocus"
                     name="email"
                     type="email"
                     value="${request/email|nothing}"
                     tal:condition="python: not request.get('report_blurb')"
              />
              <input class="email"
                     name="email"
                     type="email"
                     value="${request/email|nothing}"
                     tal:condition="python: is_guest_account and request.get('report_blurb')"
              />
              <em class="message warning"
                  tal:condition="exists:errors/email"
                  tal:content="errors/email"
              >Invalid login name</em></label>
            <label class="${python:'error' if 'password' in errors else None}"><tal:span i18n:translate="label_new_password">Desired password</tal:span>
              <input class="password"
                     name="password1:utf8:ustring"
                     type="password"
              />
              <em class="message warning"
                  tal:condition="exists:errors/password"
                  tal:content="errors/password"
              >Invalid password</em></label>
            <label><tal:span i18n:translate="label_password_confirm">Again password</tal:span>
              <input class="password"
                     name="password2:utf8:ustring"
                     type="password"
              />
            </label>
          </fieldset>
          <p class="buttonBar">
            <button class="pat-button"
                    name="next"
                    type="submit"
                    value="next"
                    i18n:translate="label_next"
            >Next</button>
          </p>
        </form>

        <tal:block replace="tile:client-analytics" />
      </div>
    </metal:slot>
  </body>
</html>
