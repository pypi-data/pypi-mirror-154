import{r as f,j as s,s as C,a as w,F as ce,T as I,S as Z,B as De,R as ne,b as xe,c as ft,d as ht}from"./index.c358e13c.js";const Ge=f.exports.createContext({height:0,width:0});var Je=(e=>(e[e.BP1=520]="BP1",e[e.BP2=900]="BP2",e))(Je||{});const vt=({children:e})=>{const[i,t]=f.exports.useState(window.innerWidth),[a,n]=f.exports.useState(window.innerHeight),r=()=>{t(window.innerWidth),n(window.innerHeight)};return f.exports.useEffect(()=>(window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)),[]),s(Ge.Provider,{value:{width:i,height:a},children:e})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function qe(e,i,t,a){function n(r){return r instanceof t?r:new t(function(l){l(r)})}return new(t||(t=Promise))(function(r,l){function c(d){try{o(a.next(d))}catch(p){l(p)}}function v(d){try{o(a.throw(d))}catch(p){l(p)}}function o(d){d.done?r(d.value):n(d.value).then(c,v)}o((a=a.apply(e,i||[])).next())})}function Ke(e,i){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,n,r,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(o){return function(d){return v([o,d])}}function v(o){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,n&&(r=o[0]&2?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,n=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){t.label=o[1];break}if(o[0]===6&&t.label<r[1]){t.label=r[1],r=o;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(o);break}r[2]&&t.ops.pop(),t.trys.pop();continue}o=i.call(e,t)}catch(d){o=[6,d],n=0}finally{a=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var A=function(){},g=A(),ee=Object,x=function(e){return e===g},P=function(e){return typeof e=="function"},F=function(e,i){return ee.assign({},e,i)},Te="undefined",Oe=function(){return typeof window!=Te},pt=function(){return typeof document!=Te},mt=function(){return Oe()&&typeof window.requestAnimationFrame!=Te},le=new WeakMap,wt=0,ie=function(e){var i=typeof e,t=e&&e.constructor,a=t==Date,n,r;if(ee(e)===e&&!a&&t!=RegExp){if(n=le.get(e),n)return n;if(n=++wt+"~",le.set(e,n),t==Array){for(n="@",r=0;r<e.length;r++)n+=ie(e[r])+",";le.set(e,n)}if(t==ee){n="#";for(var l=ee.keys(e).sort();!x(r=l.pop());)x(e[r])||(n+=r+":"+ie(e[r])+",");le.set(e,n)}}else n=a?e.toJSON():i=="symbol"?e.toString():i=="string"?JSON.stringify(e):""+e;return n},Ce=!0,bt=function(){return Ce},Xe=Oe(),ke=pt(),Ee=Xe&&window.addEventListener?window.addEventListener.bind(window):A,gt=ke?document.addEventListener.bind(document):A,Re=Xe&&window.removeEventListener?window.removeEventListener.bind(window):A,yt=ke?document.removeEventListener.bind(document):A,xt=function(){var e=ke&&document.visibilityState;return x(e)||e!=="hidden"},Ct=function(e){return gt("visibilitychange",e),Ee("focus",e),function(){yt("visibilitychange",e),Re("focus",e)}},Et=function(e){var i=function(){Ce=!0,e()},t=function(){Ce=!1};return Ee("online",i),Ee("offline",t),function(){Re("online",i),Re("offline",t)}},Rt={isOnline:bt,isVisible:xt},St={initFocus:Ct,initReconnect:Et},fe=!Oe()||"Deno"in window,$t=function(e){return mt()?window.requestAnimationFrame(e):setTimeout(e,1)},te=fe?f.exports.useEffect:f.exports.useLayoutEffect,ge=typeof navigator!="undefined"&&navigator.connection,Fe=!fe&&ge&&(["slow-2g","2g"].includes(ge.effectiveType)||ge.saveData),Ye=function(e){if(P(e))try{e=e()}catch{e=""}var i=[].concat(e);e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?ie(e):"";var t=e?"$swr$"+e:"";return[e,i,t]},U=new WeakMap,Qe=0,Ze=1,et=2,re=function(e,i,t,a,n,r,l){l===void 0&&(l=!0);var c=U.get(e),v=c[0],o=c[1],d=c[3],p=v[i],h=o[i];if(l&&h)for(var V=0;V<h.length;++V)h[V](t,a,n);return r&&(delete d[i],p&&p[0])?p[0](et).then(function(){return e.get(i)}):e.get(i)},Dt=0,Se=function(){return++Dt},tt=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return qe(void 0,void 0,void 0,function(){var t,a,n,r,l,c,v,o,d,p,h,V,oe,E,m,u,J,z,W,T,L;return Ke(this,function(M){switch(M.label){case 0:if(t=e[0],a=e[1],n=e[2],r=e[3],l=typeof r=="boolean"?{revalidate:r}:r||{},c=x(l.populateCache)?!0:l.populateCache,v=l.revalidate!==!1,o=l.rollbackOnError!==!1,d=l.optimisticData,p=Ye(a),h=p[0],V=p[2],!h)return[2];if(oe=U.get(t),E=oe[2],e.length<3)return[2,re(t,h,t.get(h),g,g,v,!0)];if(m=n,J=Se(),E[h]=[J,0],z=!x(d),W=t.get(h),z&&(T=P(d)?d(W):d,t.set(h,T),re(t,h,T)),P(m))try{m=m(t.get(h))}catch(N){u=N}return m&&P(m.then)?[4,m.catch(function(N){u=N})]:[3,2];case 1:if(m=M.sent(),J!==E[h][0]){if(u)throw u;return[2,m]}else u&&z&&o&&(c=!0,m=W,t.set(h,W));M.label=2;case 2:return c&&(u||(P(c)&&(m=c(m,W)),t.set(h,m)),t.set(V,F(t.get(V),{error:u}))),E[h][1]=Se(),[4,re(t,h,m,u,g,v,!!c)];case 3:if(L=M.sent(),u)throw u;return[2,c?L:m]}})})},Me=function(e,i){for(var t in e)e[t][0]&&e[t][0](i)},rt=function(e,i){if(!U.has(e)){var t=F(St,i),a={},n=tt.bind(g,e),r=A;if(U.set(e,[a,{},{},{},n]),!fe){var l=t.initFocus(setTimeout.bind(g,Me.bind(g,a,Qe))),c=t.initReconnect(setTimeout.bind(g,Me.bind(g,a,Ze)));r=function(){l&&l(),c&&c(),U.delete(e)}}return[e,n,r]}return[e,U.get(e)[4]]},Tt=function(e,i,t,a,n){var r=t.errorRetryCount,l=n.retryCount,c=~~((Math.random()+.5)*(1<<(l<8?l:8)))*t.errorRetryInterval;!x(r)&&l>r||setTimeout(a,c,n)},nt=rt(new Map),it=nt[0],Ot=nt[1],at=F({onLoadingSlow:A,onSuccess:A,onError:A,onErrorRetry:Tt,onDiscarded:A,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Fe?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Fe?5e3:3e3,compare:function(e,i){return ie(e)==ie(i)},isPaused:function(){return!1},cache:it,mutate:Ot,fallback:{}},Rt),ot=function(e,i){var t=F(e,i);if(i){var a=e.use,n=e.fallback,r=i.use,l=i.fallback;a&&r&&(t.use=a.concat(r)),n&&l&&(t.fallback=F(n,l))}return t},$e=f.exports.createContext({}),kt=function(e){var i=e.value,t=ot(f.exports.useContext($e),i),a=i&&i.provider,n=f.exports.useState(function(){return a?rt(a(t.cache||it),i):g})[0];return n&&(t.cache=n[0],t.mutate=n[1]),te(function(){return n?n[2]:g},[]),f.exports.createElement($e.Provider,F(e,{value:t}))},At=function(e,i){var t=f.exports.useState({})[1],a=f.exports.useRef(e),n=f.exports.useRef({data:!1,error:!1,isValidating:!1}),r=f.exports.useCallback(function(l){var c=!1,v=a.current;for(var o in l){var d=o;v[d]!==l[d]&&(v[d]=l[d],n.current[d]&&(c=!0))}c&&!i.current&&t({})},[]);return te(function(){a.current=e}),[a,n.current,r]},Vt=function(e){return P(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]},Wt=function(){return F(at,f.exports.useContext($e))},_t=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=Wt(),r=Vt(t),l=r[0],c=r[1],v=r[2],o=ot(n,v),d=e,p=o.use;if(p)for(var h=p.length;h-- >0;)d=p[h](d);return d(l,c||o.fetcher,o)}},je=function(e,i,t){var a=i[e]||(i[e]=[]);return a.push(t),function(){var n=a.indexOf(t);n>=0&&(a[n]=a[a.length-1],a.pop())}},ye={dedupe:!0},It=function(e,i,t){var a=t.cache,n=t.compare,r=t.fallbackData,l=t.suspense,c=t.revalidateOnMount,v=t.refreshInterval,o=t.refreshWhenHidden,d=t.refreshWhenOffline,p=U.get(a),h=p[0],V=p[1],oe=p[2],E=p[3],m=Ye(e),u=m[0],J=m[1],z=m[2],W=f.exports.useRef(!1),T=f.exports.useRef(!1),L=f.exports.useRef(u),M=f.exports.useRef(i),N=f.exports.useRef(t),b=function(){return N.current},he=function(){return b().isVisible()&&b().isOnline()},se=function($){return a.set(z,F(a.get(z),$))},Ae=a.get(u),lt=x(r)?t.fallback[u]:r,_=x(Ae)?lt:Ae,Ve=a.get(z)||{},q=Ve.error,We=!W.current,_e=function(){return We&&!x(c)?c:b().isPaused()?!1:l?x(_)?!1:t.revalidateIfStale:x(_)||t.revalidateIfStale},ct=function(){return!u||!i?!1:Ve.isValidating?!0:We&&_e()},ve=ct(),pe=At({data:_,error:q,isValidating:ve},T),B=pe[0],me=pe[1],ue=pe[2],H=f.exports.useCallback(function($){return qe(void 0,void 0,void 0,function(){var R,S,D,K,X,O,y,j,k,we,Y,G,be;return Ke(this,function(Q){switch(Q.label){case 0:if(R=M.current,!u||!R||T.current||b().isPaused())return[2,!1];K=!0,X=$||{},O=!E[u]||!X.dedupe,y=function(){return!T.current&&u===L.current&&W.current},j=function(){var Ie=E[u];Ie&&Ie[1]===D&&delete E[u]},k={isValidating:!1},we=function(){se({isValidating:!1}),y()&&ue(k)},se({isValidating:!0}),ue({isValidating:!0}),Q.label=1;case 1:return Q.trys.push([1,3,,4]),O&&(re(a,u,B.current.data,B.current.error,!0),t.loadingTimeout&&!a.get(u)&&setTimeout(function(){K&&y()&&b().onLoadingSlow(u,t)},t.loadingTimeout),E[u]=[R.apply(void 0,J),Se()]),be=E[u],S=be[0],D=be[1],[4,S];case 2:return S=Q.sent(),O&&setTimeout(j,t.dedupingInterval),!E[u]||E[u][1]!==D?(O&&y()&&b().onDiscarded(u),[2,!1]):(se({error:g}),k.error=g,Y=oe[u],!x(Y)&&(D<=Y[0]||D<=Y[1]||Y[1]===0)?(we(),O&&y()&&b().onDiscarded(u),[2,!1]):(n(B.current.data,S)?k.data=B.current.data:k.data=S,n(a.get(u),S)||a.set(u,S),O&&y()&&b().onSuccess(S,u,t),[3,4]));case 3:return G=Q.sent(),j(),b().isPaused()||(se({error:G}),k.error=G,O&&y()&&(b().onError(G,u,t),(typeof t.shouldRetryOnError=="boolean"&&t.shouldRetryOnError||P(t.shouldRetryOnError)&&t.shouldRetryOnError(G))&&he()&&b().onErrorRetry(G,u,t,H,{retryCount:(X.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return K=!1,we(),y()&&O&&re(a,u,k.data,k.error,!1),[2,!0]}})})},[u]),dt=f.exports.useCallback(tt.bind(g,a,function(){return L.current}),[]);if(te(function(){M.current=i,N.current=t}),te(function(){if(!!u){var $=u!==L.current,R=H.bind(g,ye),S=function(y,j,k){ue(F({error:j,isValidating:k},n(B.current.data,y)?g:{data:y}))},D=0,K=function(y){if(y==Qe){var j=Date.now();b().revalidateOnFocus&&j>D&&he()&&(D=j+b().focusThrottleInterval,R())}else if(y==Ze)b().revalidateOnReconnect&&he()&&R();else if(y==et)return H()},X=je(u,V,S),O=je(u,h,K);return T.current=!1,L.current=u,W.current=!0,$&&ue({data:_,error:q,isValidating:ve}),_e()&&(x(_)||fe?R():$t(R)),function(){T.current=!0,X(),O()}}},[u,H]),te(function(){var $;function R(){var D=P(v)?v(_):v;D&&$!==-1&&($=setTimeout(S,D))}function S(){!B.current.error&&(o||b().isVisible())&&(d||b().isOnline())?H(ye).then(R):R()}return R(),function(){$&&(clearTimeout($),$=-1)}},[v,o,d,H]),f.exports.useDebugValue(_),l&&x(_)&&u)throw M.current=i,N.current=t,T.current=!1,x(q)?H(ye):q;return{mutate:dt,get data(){return me.data=!0,_},get error(){return me.error=!0,q},get isValidating(){return me.isValidating=!0,ve}}};ee.defineProperty(kt,"default",{value:at});var Ft=_t(It);const Pe=C("h2",{color:"$primaryDark",variants:{size:{small:{fontSize:"$2",fontWeight:"$big"},medium:{fontSize:"$3",fontWeight:"$big"},large:{fontSize:"$5",lineHeight:"24px",fontWeight:"$big"}}},defaultVariants:{size:"medium"}}),ze=C("h1",{fontWeight:"$big",fontSize:"$4",variants:{color:{dark:{color:"$primaryDark"},light:{color:"$white"}}},defaultVariants:{color:"dark"}}),Mt=C("h2",{fontWeight:"$big",fontSize:"$3",variants:{color:{dark:{color:"$primaryDark"},light:{color:"$white"}}},defaultVariants:{color:"dark"}}),ae=C("a",{textDecoration:"none",fontSize:"inherit",fontWeight:"inherit",variants:{color:{white:{color:"$white","&:hover":{color:"$primaryPurple",transition:"color 0.1s ease"}},blue:{color:"$linkBlue"},purple:{color:"$primaryPurple"}}}}),Le=C("div",{width:"fit-content",backgroundColor:"$lightGray",padding:"$2",whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"$3"}),jt=`import databutton as db
import streamlit as st

@db.apps.streamlit(route="/app", name="My App")
def app():
    st.title("My app")

@db.jobs.repeat_every(seconds=60, name="My Job")
def job():
    # Something amazing here
    print("Success!")
`,Pt="$ databutton deploy",zt=({localOrCloud:e})=>e==="local"?w(ce,{children:[s(Pe,{size:"large",children:"Oh, this project seems a bit empty"}),s(I,{children:"In order to add components to your project add one of the following decorators to any of your .py-files and they will magically appear here"}),s(Z,{height:"small"}),s(Le,{children:jt}),s(Z,{height:"small"}),w(I,{children:["To learn more about Databutton head over to our"," ",s(ae,{href:"https://docs.databutton.com",target:"_blank",rel:"noreferrer",color:"blue",children:"documentation"})]})]}):w(ce,{children:[s(Pe,{size:"large",children:"Oh, this project seems to not have been deployed yet"}),s(I,{children:"In order to deploy your project, navigate to your project folder and write the following"}),s(Z,{height:"small"}),s(Le,{children:Pt}),s(Z,{height:"small"}),w(I,{children:["To learn more about Databutton head over to our"," ",s(ae,{color:"blue",href:"https://docs.databutton.com",target:"_blank",rel:"noreferrer",children:"documentation"})]})]}),Lt=C("div",{display:"flex",flexFlow:"column",padding:"$2",variants:{width:{full:{width:"100%"},"one-half":{width:"50%"},"one-third":{width:"33%"},"one-fourth":{width:"25%"}},align:{center:{margin:"0 auto"}}},defaultVariants:{width:"full"}}),de=C(De,{borderRadius:"5px",backgroundColor:"purple",padding:"$2",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",width:"100%",variants:{color:{purple:{background:"$darkPurpleGradient",color:"$white"},black:{background:"$blackGradient",color:"$white"},gray:{background:"$lightGray",color:"$primaryDark",boxShadow:"none"}}},defaultVariants:{color:"purple"}}),st=C("div",{variants:{width:{mobile:{width:"100%"},tablet:{width:"45%"},desktop:{width:"200px"}}}}),Ne=40,Nt=({app:e,onClick:i})=>{var a;return s(st,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:w(de,{width:"full",css:{display:"flex",flexFlow:"column",justifyContent:"space-between",height:"100px",cursor:"pointer"},onClick:()=>{i(e)},children:[s(ne,{children:(n=>n.length>Ne?`${n.slice(0,Ne)}...`:n)((a=e.name)!=null?a:e.filename)}),s(ne,{css:{opacity:.7},children:w(I,{color:"white",size:"2",children:[e.memory," / ",e.cpu," CPU"]})})]})})},ut=C("div",{variants:{width:{mobile:{width:"100%"},tablet:{width:"45%"},desktop:{width:"200px"}}}}),Ht=({schedule:e})=>{var i;return s(ut,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:w(de,{color:"black",width:"full",css:{height:"100px",display:"flex",flexFlow:"column",justifyContent:"space-between"},children:[s(ne,{children:(i=e.name)!=null?i:"Unnamed job"}),s(ne,{css:{opacity:.7},children:w(I,{size:"2",color:"white",children:["Runs every ",e.seconds," seconds"," "]})})]})})},Ut=()=>{const{width:e,height:i}=f.exports.useContext(Ge);return{width:e,height:i}},He=C("div",{display:"flex",flexWrap:"wrap",gap:"$4"}),Bt=C("div",{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"$4"}),Gt=C("div",{$$height:"90vh",height:"$$height",width:"100%","&>iframe":{height:"$$height",width:"100%"}}),Jt=C("div",{}),qt=({projectUrl:e,apps:i,schedules:t,headerContent:a})=>{const[n,r]=f.exports.useState(null),{width:l}=Ut(),c=o=>{window.location.replace(`${e}${o.route}`)},v=l>=Je.BP2;return w(Bt,{children:[w("div",{children:[a,s(ze,{children:"Apps"}),i.length>0?s(He,{children:i.map(o=>s(Nt,{onClick:()=>{v?r(o):c(o)},app:o},o.uid))}):s(st,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:s(de,{color:"gray",css:{textAlign:"center"},children:s(I,{weight:"big",children:"No apps"})})}),s(Z,{}),s(ze,{children:"Jobs"}),t.length>0?s(He,{children:t.map(o=>s(Ht,{schedule:o},o.uid))}):s(ut,{width:{"@initial":"mobile","@bp1":"tablet","@bp2":"desktop"},children:s(de,{color:"gray",css:{textAlign:"center"},children:s(I,{weight:"big",children:"No schedules"})})})]}),v&&s(Gt,{children:n&&w(ce,{children:[w(ne,{css:{justifyContent:"space-between"},children:[s(Mt,{children:n.name}),w(Jt,{css:{display:"flex",gap:"$1",alignItems:"flex-start"},children:[s(ae,{href:`${e}${n.route}`,target:"_blank",rel:"noreferrer",children:s(xe,{children:"Open in separate window"})}),s(xe,{intent:"secondary",onClick:()=>r(null),children:"Close app"})]})]}),s("iframe",{src:`${e}${n.route}`,title:n.name})]})})]})},Ue=C(De,{display:"flex",justifyContent:"center",alignItems:"center",gap:"$3"}),Kt=C(De,{display:"flex",paddingX:"$3",height:"60px",backgroundColor:"$primaryDark",flexDirection:"row",alignItems:"center",justifyContent:"space-between",transition:"0.2s ease-in",width:"100%"}),Xt=({projectName:e})=>w(Kt,{children:[w(Ue,{children:[s("img",{src:"/logo.png",height:"30px",width:"30px",alt:"Databutton"}),e&&s(I,{color:"white",children:e})]}),w(Ue,{children:[s(ae,{href:"https://docs.databutton.com",target:"_blank",rel:"noreferrer",color:"white",children:"Documentation"}),s(ae,{href:"https://next.databutton.com",target:"_blank",rel:"noreferrer",children:s(xe,{children:"databutton.com"})})]})]}),Be="http://localhost:8000";function Yt(){const{data:e}=Ft(`${Be}/static/artifacts.json`,a=>fetch(a).then(n=>n.json()),{refreshInterval:500}),i=f.exports.useMemo(()=>e?e.streamlit_apps:[],[e]),t=(e==null?void 0:e.streamlit_apps.length)===0&&e.schedules.length===0;return w(ce,{children:[s(Xt,{}),s(Lt,{children:t?s(zt,{localOrCloud:"local"}):s(qt,{projectUrl:Be,apps:i,schedules:e?e.schedules:[]})})]})}ft.createRoot(document.getElementById("root")).render(s(ht.StrictMode,{children:s(vt,{children:s(Yt,{})})}));
